{% extends "app/base.html" %}
{% load static %}

{% block title %}Medical Record{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/detail.css' %}">
{% endblock %}

{% block content %}
<section class="record-detail-section">
    <h2 class="section-title">Medical Record #{{ object.record_id }}</h2>
    <p><strong>Patient:</strong> {{ object.visit.patient.first_name }} {{ object.visit.patient.last_name }}</p>
    <p><strong>Diagnosis:</strong> {{ object.diagnosis }}</p>
    <p><strong>Treatment:</strong> {{ object.treatment }}</p>
    <p><strong>Next Follow-up:</strong> {{ object.next_followup_date }}</p>

    <div class="record-box">
        <h3 class="sub-title">Lab Results</h3>
            <table class="table lab-table">
                <thead>
                    <tr>
                        <th>Test Name</th>
                        <th>Result</th>
                        <th>Units</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for lab in object.labresult_set.all %}
                    <tr>
                        <td>{{ lab.test_name }}</td>
                        <td>{{ lab.result }}</td>
                        <td>{{ lab.units }}</td>
                        <td>{{ lab.date_performed }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="4">No lab results.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
    </div>




    <div class="record-box">
        <h3 class="sub-title">Medications</h3>
            <table class="table medication-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Dosage</th>
                        <th>Frequency</th>
                        <th>Duration</th>
                    </tr>
                </thead>
                <tbody>
                    {% for med in object.medication_set.all %}
                    <tr>
                        <td>{{ med.name }}</td>
                        <td>{{ med.dosage }}</td>
                        <td>{{ med.frequency }}</td>
                        <td>{{ med.duration }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="4">No medications.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
    </div>

</section>
{% endblock %}
